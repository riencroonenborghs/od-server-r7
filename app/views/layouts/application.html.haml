!!!
%html
  %head
    %title
      OD Server - 
      = yield :title 
    %meta(name="viewport" content="width=device-width, initial-scale=1")
    -# = favicon_link_tag asset_path("favicon.png")
    -# %link(rel="apple-touch-icon" href="#{asset_path("apple-touch.png")}")
    = csrf_meta_tags
    = csp_meta_tag

    = stylesheet_link_tag "application", "data-turbo-track": "reload"
    = javascript_include_tag "application", "data-turbo-track": "reload", defer: true
    %link(rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css")

  %body(id="#{'user' if user_signed_in?}")
    %nav.navbar.sticky-top.border-bottom.navbar-light.bg-white
      .container-fluid
        %div
          = link_to root_path, class: "navbar-brand" do
            OD Server
        .d-flex
          %div(class="#{'current-page' if current_page?(new_download_path)}")
            = link_to new_download_path, title: "New Download", class: "btn" do
              %i.bi.bi-plus-lg
          .ps-3.pe-3
          %div(class="#{'current-page' if current_page?(queued_downloads_path) || current_page?(root_path)}")
            = link_to queued_downloads_path, title: "Queued Downloads", class: "btn" do
              %i.bi.bi-list-ul
          %div(class="#{'current-page' if current_page?(started_downloads_path)}")
            = link_to started_downloads_path, title: "Started Downloads", class: "btn" do
              %i.bi.bi-download
          %div(class="#{'current-page' if current_page?(finished_downloads_path)}")
            = link_to finished_downloads_path, title: "Finished Downloads", class: "btn" do
              %i.bi.bi-check2
          %div(class="#{'current-page' if current_page?(failed_downloads_path)}")
            = link_to failed_downloads_path, title: "Failed Downloads", class: "btn" do
              %i.bi.bi-exclamation-lg
          %div(class="#{'current-page' if current_page?(cancelled_downloads_path)}")
            = link_to cancelled_downloads_path, title: "Cancelled Downloads", class: "btn" do
              %i.bi.bi-x-lg
          .ps-3.pe-3
          - if user_signed_in?
            %div
              = link_to destroy_user_session_path, method: :delete, title: "Log out", class: "btn" do
                %i.bi.bi-lock
          - else
            %div(class="#{'current-page' if current_page?(new_user_session_path)}")
              = link_to new_user_session_path, title: "Log in", class: "btn" do
                %i.bi.bi-unlock

    = render partial: "/layouts/flash_messages"
    =# render partial: "/layouts/async_flash_messages"

    .pt-4
      =yield

    